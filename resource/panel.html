<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gyedit</title>
    <script src="P5JSSRC"></script>
</head>

<body>
    <canvas id="c" width="800" height="600" style="background-color: white;"></canvas>

    <script>
        var canvas = new fabric.StaticCanvas('c');
        // Handle the message inside the webview
        window.addEventListener('message', event => {
            canvas.clear()
            const message = event.data; // The JSON data our extension sent
            if(!message.components)return
            for(let i in message.components){
                const d=message.components[i]
                if(!d.tag.includes("img")){continue}
                fabric.Image.fromURL(d.url,function(c){
                    canvas.add(c)
                },{"left":d.pos.x,"top":d.pos.y})
            }
        });
    </script>
</body>

</html>